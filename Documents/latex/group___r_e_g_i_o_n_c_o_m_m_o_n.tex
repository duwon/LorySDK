\hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n}{}\section{Common region implementation}
\label{group___r_e_g_i_o_n_c_o_m_m_o_n}\index{Common region implementation@{Common region implementation}}
\subsection*{데이터 구조}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structs_region_common_link_adr_params}{s\+Region\+Common\+Link\+Adr\+Params}}
\item 
struct \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params}{s\+Region\+Common\+Link\+Adr\+Req\+Verify\+Params}}
\item 
struct \mbox{\hyperlink{structs_region_common_calc_back_off_params}{s\+Region\+Common\+Calc\+Back\+Off\+Params}}
\end{DoxyCompactItemize}
\subsection*{타입정의}
\begin{DoxyCompactItemize}
\item 
typedef struct \mbox{\hyperlink{structs_region_common_link_adr_params}{s\+Region\+Common\+Link\+Adr\+Params}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga6e1aaa6b8d179e2daffac8d1e23d7f24}{Region\+Common\+Link\+Adr\+Params\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params}{s\+Region\+Common\+Link\+Adr\+Req\+Verify\+Params}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gad186afbaf1b52893ddc3fa5eba88de0a}{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}}
\item 
typedef struct \mbox{\hyperlink{structs_region_common_calc_back_off_params}{s\+Region\+Common\+Calc\+Back\+Off\+Params}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga26c2fc7c3e1d929d59b5653a5cd1fc0c}{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}}
\end{DoxyCompactItemize}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga672466fcf1aedaaf075cdabf49bc0c28}{Region\+Common\+Get\+Join\+Dc}} (\mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{Timer\+Time\+\_\+t}} elapsed\+Time)
\begin{DoxyCompactList}\small\item\em Calculates the join duty cycle. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gafdd1c80d953e18d755a631b72a9c3bd3}{Region\+Common\+Value\+In\+Range}} (int8\+\_\+t value, int8\+\_\+t min, int8\+\_\+t max)
\begin{DoxyCompactList}\small\item\em Verifies, if a value is in a given range. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga94ce5c6e759081853eb06d1dcffdab25}{Region\+Common\+Chan\+Verify\+Dr}} (uint8\+\_\+t nb\+Channels, uint16\+\_\+t $\ast$channels\+Mask, int8\+\_\+t dr, int8\+\_\+t min\+Dr, int8\+\_\+t max\+Dr, \mbox{\hyperlink{group___l_o_r_a_m_a_c_ga1360ca6f82c6d125ea43a9dad9b56184}{Channel\+Params\+\_\+t}} $\ast$channels)
\begin{DoxyCompactList}\small\item\em Verifies, if a datarate is available on an active channel. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga695c0ab2a06edcae5b33772f639fb676}{Region\+Common\+Chan\+Disable}} (uint16\+\_\+t $\ast$channels\+Mask, uint8\+\_\+t id, uint8\+\_\+t max\+Channels)
\begin{DoxyCompactList}\small\item\em Disables a channel in a given channels mask. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gac23f0831812f610f57f42f6cf87368c9}{Region\+Common\+Count\+Channels}} (uint16\+\_\+t $\ast$channels\+Mask, uint8\+\_\+t start\+Idx, uint8\+\_\+t stop\+Idx)
\begin{DoxyCompactList}\small\item\em Counts the number of active channels in a given channels mask. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga95f5199d490113269fae7f2e0569e9a0}{Region\+Common\+Chan\+Mask\+Copy}} (uint16\+\_\+t $\ast$channels\+Mask\+Dest, uint16\+\_\+t $\ast$channels\+Mask\+Src, uint8\+\_\+t len)
\begin{DoxyCompactList}\small\item\em Copy a channels mask. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga491dea5590228a0cd33affd71743779c}{Region\+Common\+Set\+Band\+Tx\+Done}} (bool joined, \mbox{\hyperlink{group___l_o_r_a_m_a_c_ga8f49721ee96ceb52c80a896ab11a2ed8}{Band\+\_\+t}} $\ast$band, \mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{Timer\+Time\+\_\+t}} last\+Tx\+Done)
\begin{DoxyCompactList}\small\item\em Sets the last tx done property. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
\mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{Timer\+Time\+\_\+t}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga2e26fe6b49ca26edf7052eadd7f18b3a}{Region\+Common\+Update\+Band\+Time\+Off}} (bool joined, bool duty\+Cycle, \mbox{\hyperlink{group___l_o_r_a_m_a_c_ga8f49721ee96ceb52c80a896ab11a2ed8}{Band\+\_\+t}} $\ast$bands, uint8\+\_\+t nb\+Bands)
\begin{DoxyCompactList}\small\item\em Updates the time-\/offs of the bands. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga8403c78482dbb901014dba48b75d78e8}{Region\+Common\+Parse\+Link\+Adr\+Req}} (uint8\+\_\+t $\ast$payload, \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga6e1aaa6b8d179e2daffac8d1e23d7f24}{Region\+Common\+Link\+Adr\+Params\+\_\+t}} $\ast$parse\+Link\+Adr)
\begin{DoxyCompactList}\small\item\em Parses the parameter of an Link\+Adr\+Request. This is a generic function and valid for all regions. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga2c87f98f09793dc7fa63a9801feeed73}{Region\+Common\+Link\+Adr\+Req\+Verify\+Params}} (\mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gad186afbaf1b52893ddc3fa5eba88de0a}{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}} $\ast$verify\+Params, int8\+\_\+t $\ast$dr, int8\+\_\+t $\ast$tx\+Pow, uint8\+\_\+t $\ast$nb\+Rep)
\begin{DoxyCompactList}\small\item\em Verifies and updates the datarate, the TX power and the number of repetitions of a Link\+Adr\+Request. This depends on the configuration of A\+DR also. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga79ed8b6555b68276d3c9ff2626b20fc8}{Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra}} (uint8\+\_\+t phy\+Dr, uint32\+\_\+t bandwidth)
\begin{DoxyCompactList}\small\item\em Computes the symbol time for Lo\+Ra modulation. \end{DoxyCompactList}\item 
double \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gacc2af896b03aa8ed8d8e5950d96d365f}{Region\+Common\+Compute\+Symbol\+Time\+Fsk}} (uint8\+\_\+t phy\+Dr)
\begin{DoxyCompactList}\small\item\em Computes the symbol time for F\+SK modulation. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gaba7114d0ca01f04933710feb13646138}{Region\+Common\+Compute\+Rx\+Window\+Parameters}} (double t\+Symbol, uint8\+\_\+t min\+Rx\+Symbols, uint32\+\_\+t rx\+Error, uint32\+\_\+t wake\+Up\+Time, uint32\+\_\+t $\ast$window\+Timeout, int32\+\_\+t $\ast$window\+Offset)
\begin{DoxyCompactList}\small\item\em Computes the RX window timeout and the RX window offset. \end{DoxyCompactList}\item 
int8\+\_\+t \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gaa92800c8e9ce21366d383d14878cc391}{Region\+Common\+Compute\+Tx\+Power}} (int8\+\_\+t tx\+Power\+Index, float max\+Eirp, float antenna\+Gain)
\begin{DoxyCompactList}\small\item\em Computes the tx\+Power, based on the max E\+I\+RP and the antenna gain. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gae2b1dfba27c79f605048f2d9869dc57d}{Region\+Common\+Calc\+Back\+Off}} (\mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga26c2fc7c3e1d929d59b5653a5cd1fc0c}{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}} $\ast$calc\+Back\+Off\+Params)
\begin{DoxyCompactList}\small\item\em Calculates the duty cycle for the current band. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{상세한 설명}
Region independent implementations which are common to all regions. 

\subsection{타입정의 문서화}
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga26c2fc7c3e1d929d59b5653a5cd1fc0c}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga26c2fc7c3e1d929d59b5653a5cd1fc0c}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t@{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}}
\index{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t@{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}{RegionCommonCalcBackOffParams\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structs_region_common_calc_back_off_params}{s\+Region\+Common\+Calc\+Back\+Off\+Params}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga26c2fc7c3e1d929d59b5653a5cd1fc0c}{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}}}

\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga6e1aaa6b8d179e2daffac8d1e23d7f24}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga6e1aaa6b8d179e2daffac8d1e23d7f24}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Link\+Adr\+Params\+\_\+t@{Region\+Common\+Link\+Adr\+Params\+\_\+t}}
\index{Region\+Common\+Link\+Adr\+Params\+\_\+t@{Region\+Common\+Link\+Adr\+Params\+\_\+t}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Link\+Adr\+Params\+\_\+t}{RegionCommonLinkAdrParams\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structs_region_common_link_adr_params}{s\+Region\+Common\+Link\+Adr\+Params}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga6e1aaa6b8d179e2daffac8d1e23d7f24}{Region\+Common\+Link\+Adr\+Params\+\_\+t}}}

\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gad186afbaf1b52893ddc3fa5eba88de0a}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gad186afbaf1b52893ddc3fa5eba88de0a}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t@{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}}
\index{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t@{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}{RegionCommonLinkAdrReqVerifyParams\_t}}
{\footnotesize\ttfamily typedef struct \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params}{s\+Region\+Common\+Link\+Adr\+Req\+Verify\+Params}} \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gad186afbaf1b52893ddc3fa5eba88de0a}{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}}}



\subsection{함수 문서화}
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gae2b1dfba27c79f605048f2d9869dc57d}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gae2b1dfba27c79f605048f2d9869dc57d}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Calc\+Back\+Off@{Region\+Common\+Calc\+Back\+Off}}
\index{Region\+Common\+Calc\+Back\+Off@{Region\+Common\+Calc\+Back\+Off}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Calc\+Back\+Off()}{RegionCommonCalcBackOff()}}
{\footnotesize\ttfamily void Region\+Common\+Calc\+Back\+Off (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga26c2fc7c3e1d929d59b5653a5cd1fc0c}{Region\+Common\+Calc\+Back\+Off\+Params\+\_\+t}} $\ast$}]{calc\+Back\+Off\+Params }\end{DoxyParamCaption})}



Calculates the duty cycle for the current band. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & calc\+Back\+Off\+Params A pointer to the input parameters. \\
\hline
\end{DoxyParams}


Region\+Common.\+c 파일의 319 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
320 \{
321     uint8\_t bandIdx = calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_afecbd1e457cbd79eb7072bd140ff33d4}{Channels}}[calcBackOffParams->
      \mbox{\hyperlink{structs_region_common_calc_back_off_params_a1ca6f01ca18afe402de51babe8c95f5e}{Channel}}].\mbox{\hyperlink{structs_channel_params_a724c03aa06953111c3291243831f251b}{Band}};
322     uint16\_t dutyCycle = calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a18afce97f43b46e9d294e5babbb15f15}{Bands}}[bandIdx].\mbox{\hyperlink{structs_band_a9ab2dfbcbe5e7e43c95ff6a436886139}{DCycle}};
323     uint16\_t joinDutyCycle = 0;
324 
325     \textcolor{comment}{// Reset time-off to initial value.}
326     calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a18afce97f43b46e9d294e5babbb15f15}{Bands}}[bandIdx].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = 0;
327 
328     \textcolor{keywordflow}{if}( calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_ac2f6caa0f3b02d2ac5056c3ee7c22652}{Joined}} == \textcolor{keyword}{false} )
329     \{
330         \textcolor{comment}{// Get the join duty cycle}
331         joinDutyCycle = \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga672466fcf1aedaaf075cdabf49bc0c28}{RegionCommonGetJoinDc}}( calcBackOffParams->
      \mbox{\hyperlink{structs_region_common_calc_back_off_params_a2ece30988e7a5bac284623173173c71a}{ElapsedTime}} );
332         \textcolor{comment}{// Apply the most restricting duty cycle}
333         dutyCycle = \mbox{\hyperlink{utilities_8h_afa99ec4acc4ecb2dc3c2d05da15d0e3f}{MAX}}( dutyCycle, joinDutyCycle );
334         \textcolor{comment}{// Reset the timeoff if the last frame was not a join request and when the duty cycle is not
       enabled}
335         \textcolor{keywordflow}{if}( ( calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a4d755868e0e80089462286c3ba6a6f18}{DutyCycleEnabled}} == \textcolor{keyword}{false} ) && ( calcBackOffParams->
      \mbox{\hyperlink{structs_region_common_calc_back_off_params_a4088d0ca2ff21fd5cdc110e14816dd53}{LastTxIsJoinRequest}} == \textcolor{keyword}{false} ) )
336         \{
337             \textcolor{comment}{// This is the case when the duty cycle is off and the last uplink frame was not a join.}
338             \textcolor{comment}{// This could happen in case of a rejoin, e.g. in compliance test mode.}
339             \textcolor{comment}{// In this special case we have to set the time off to 0, since the join duty cycle shall only}
340             \textcolor{comment}{// be applied after the first join request.}
341             calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a18afce97f43b46e9d294e5babbb15f15}{Bands}}[bandIdx].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = 0;
342         \}
343         \textcolor{keywordflow}{else}
344         \{
345             \textcolor{comment}{// Apply band time-off.}
346             calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a18afce97f43b46e9d294e5babbb15f15}{Bands}}[bandIdx].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = calcBackOffParams->
      \mbox{\hyperlink{structs_region_common_calc_back_off_params_aa17a8607485db100d315e74853dd217e}{TxTimeOnAir}} * dutyCycle - calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_aa17a8607485db100d315e74853dd217e}{TxTimeOnAir}};
347         \}
348     \}
349     \textcolor{keywordflow}{else}
350     \{
351         \textcolor{keywordflow}{if}( calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a4d755868e0e80089462286c3ba6a6f18}{DutyCycleEnabled}} == \textcolor{keyword}{true} )
352         \{
353             calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a18afce97f43b46e9d294e5babbb15f15}{Bands}}[bandIdx].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = calcBackOffParams->
      \mbox{\hyperlink{structs_region_common_calc_back_off_params_aa17a8607485db100d315e74853dd217e}{TxTimeOnAir}} * dutyCycle - calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_aa17a8607485db100d315e74853dd217e}{TxTimeOnAir}};
354         \}
355         \textcolor{keywordflow}{else}
356         \{
357             calcBackOffParams->\mbox{\hyperlink{structs_region_common_calc_back_off_params_a18afce97f43b46e9d294e5babbb15f15}{Bands}}[bandIdx].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = 0;
358         \}
359     \}
360 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 0
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 1
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga695c0ab2a06edcae5b33772f639fb676}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga695c0ab2a06edcae5b33772f639fb676}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Chan\+Disable@{Region\+Common\+Chan\+Disable}}
\index{Region\+Common\+Chan\+Disable@{Region\+Common\+Chan\+Disable}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Chan\+Disable()}{RegionCommonChanDisable()}}
{\footnotesize\ttfamily bool Region\+Common\+Chan\+Disable (\begin{DoxyParamCaption}\item[{uint16\+\_\+t $\ast$}]{channels\+Mask,  }\item[{uint8\+\_\+t}]{id,  }\item[{uint8\+\_\+t}]{max\+Channels }\end{DoxyParamCaption})}



Disables a channel in a given channels mask. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & channels\+Mask The channels mask of the region.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & id The id of the channels mask to disable.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & max\+Channels Maximum number of channels.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & true if the channel could be disabled, false if not. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 106 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
107 \{
108     uint8\_t index = \textcolor{keywordtype}{id} / 16;
109 
110     \textcolor{keywordflow}{if}( ( index > ( maxChannels / 16 ) ) || ( \textcolor{keywordtype}{id} >= maxChannels ) )
111     \{
112         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
113     \}
114 
115     \textcolor{comment}{// Deactivate channel}
116     channelsMask[index] &= ~( 1 << ( \textcolor{keywordtype}{id} % 16 ) );
117 
118     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
119 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 2
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga95f5199d490113269fae7f2e0569e9a0}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga95f5199d490113269fae7f2e0569e9a0}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Chan\+Mask\+Copy@{Region\+Common\+Chan\+Mask\+Copy}}
\index{Region\+Common\+Chan\+Mask\+Copy@{Region\+Common\+Chan\+Mask\+Copy}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Chan\+Mask\+Copy()}{RegionCommonChanMaskCopy()}}
{\footnotesize\ttfamily void Region\+Common\+Chan\+Mask\+Copy (\begin{DoxyParamCaption}\item[{uint16\+\_\+t $\ast$}]{channels\+Mask\+Dest,  }\item[{uint16\+\_\+t $\ast$}]{channels\+Mask\+Src,  }\item[{uint8\+\_\+t}]{len }\end{DoxyParamCaption})}



Copy a channels mask. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & channels\+Mask\+Dest The destination channels mask.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & channels\+Mask\+Src The source channels mask.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & len The index length to copy. \\
\hline
\end{DoxyParams}


Region\+Common.\+c 파일의 138 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
139 \{
140     \textcolor{keywordflow}{if}( ( channelsMaskDest != NULL ) && ( channelsMaskSrc != NULL ) )
141     \{
142         \textcolor{keywordflow}{for}( uint8\_t i = 0; i < len; i++ )
143         \{
144             channelsMaskDest[i] = channelsMaskSrc[i];
145         \}
146     \}
147 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 3
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga94ce5c6e759081853eb06d1dcffdab25}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga94ce5c6e759081853eb06d1dcffdab25}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Chan\+Verify\+Dr@{Region\+Common\+Chan\+Verify\+Dr}}
\index{Region\+Common\+Chan\+Verify\+Dr@{Region\+Common\+Chan\+Verify\+Dr}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Chan\+Verify\+Dr()}{RegionCommonChanVerifyDr()}}
{\footnotesize\ttfamily bool Region\+Common\+Chan\+Verify\+Dr (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{nb\+Channels,  }\item[{uint16\+\_\+t $\ast$}]{channels\+Mask,  }\item[{int8\+\_\+t}]{dr,  }\item[{int8\+\_\+t}]{min\+Dr,  }\item[{int8\+\_\+t}]{max\+Dr,  }\item[{\mbox{\hyperlink{group___l_o_r_a_m_a_c_ga1360ca6f82c6d125ea43a9dad9b56184}{Channel\+Params\+\_\+t}} $\ast$}]{channels }\end{DoxyParamCaption})}



Verifies, if a datarate is available on an active channel. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & nb\+Channels Number of channels.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & channels\+Mask The channels mask of the region.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & dr The datarate to verify.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & min\+Dr Minimum datarate.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & max\+Dr Maximum datarate.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & channels The channels of the region.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & true if the datarate is supported, false if not. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 72 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
73 \{
74     \textcolor{keywordflow}{if}( \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gafdd1c80d953e18d755a631b72a9c3bd3}{RegionCommonValueInRange}}( dr, minDr, maxDr ) == 0 )
75     \{
76         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
77     \}
78 
79     \textcolor{keywordflow}{for}( uint8\_t i = 0, k = 0; i < nbChannels; i += 16, k++ )
80     \{
81         \textcolor{keywordflow}{for}( uint8\_t j = 0; j < 16; j++ )
82         \{
83             \textcolor{keywordflow}{if}( ( ( channelsMask[k] & ( 1 << j ) ) != 0 ) )
84             \{\textcolor{comment}{// Check datarate validity for enabled channels}
85                 \textcolor{keywordflow}{if}( \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gafdd1c80d953e18d755a631b72a9c3bd3}{RegionCommonValueInRange}}( dr, ( channels[i + j].DrRange.Fields.
      Min & 0x0F ),
86                                                   ( channels[i + j].DrRange.Fields.Max & 0x0F ) ) == 1 )
87                 \{
88                     \textcolor{comment}{// At least 1 channel has been found we can return OK.}
89                     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
90                 \}
91             \}
92         \}
93     \}
94     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
95 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 4
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 5
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gaba7114d0ca01f04933710feb13646138}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gaba7114d0ca01f04933710feb13646138}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Compute\+Rx\+Window\+Parameters@{Region\+Common\+Compute\+Rx\+Window\+Parameters}}
\index{Region\+Common\+Compute\+Rx\+Window\+Parameters@{Region\+Common\+Compute\+Rx\+Window\+Parameters}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Compute\+Rx\+Window\+Parameters()}{RegionCommonComputeRxWindowParameters()}}
{\footnotesize\ttfamily void Region\+Common\+Compute\+Rx\+Window\+Parameters (\begin{DoxyParamCaption}\item[{double}]{t\+Symbol,  }\item[{uint8\+\_\+t}]{min\+Rx\+Symbols,  }\item[{uint32\+\_\+t}]{rx\+Error,  }\item[{uint32\+\_\+t}]{wake\+Up\+Time,  }\item[{uint32\+\_\+t $\ast$}]{window\+Timeout,  }\item[{int32\+\_\+t $\ast$}]{window\+Offset }\end{DoxyParamCaption})}



Computes the RX window timeout and the RX window offset. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & t\+Symbol Symbol timeout.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & min\+Rx\+Symbols Minimum required number of symbols to detect an Rx frame.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & rx\+Error System maximum timing error of the receiver. In milliseconds The receiver will turn on in a \mbox{[}-\/rx\+Error \+: +rx\+Error\mbox{]} ms interval around Rx\+Offset.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & wake\+Up\+Time Wakeup time of the system.\\
\hline
{\em \mbox{[}\+O\+U\+T\mbox{]}} & window\+Timeout RX window timeout.\\
\hline
{\em \mbox{[}\+O\+U\+T\mbox{]}} & window\+Offset RX window time offset to be applied to the RX delay. \\
\hline
\end{DoxyParams}


Region\+Common.\+c 파일의 304 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
305 \{
306     *windowTimeout = \mbox{\hyperlink{utilities_8h_afa99ec4acc4ecb2dc3c2d05da15d0e3f}{MAX}}( ( uint32\_t )ceil( ( ( 2 * minRxSymbols - 8 ) * tSymbol + 2 * rxError ) / 
      tSymbol ), minRxSymbols ); \textcolor{comment}{// Computed number of symbols}
307     *windowOffset = ( int32\_t )ceil( ( 4.0 * tSymbol ) - ( ( *windowTimeout * tSymbol ) / 2.0 ) - 
      wakeUpTime );
308 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 6
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gacc2af896b03aa8ed8d8e5950d96d365f}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gacc2af896b03aa8ed8d8e5950d96d365f}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Compute\+Symbol\+Time\+Fsk@{Region\+Common\+Compute\+Symbol\+Time\+Fsk}}
\index{Region\+Common\+Compute\+Symbol\+Time\+Fsk@{Region\+Common\+Compute\+Symbol\+Time\+Fsk}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Compute\+Symbol\+Time\+Fsk()}{RegionCommonComputeSymbolTimeFsk()}}
{\footnotesize\ttfamily double Region\+Common\+Compute\+Symbol\+Time\+Fsk (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{phy\+Dr }\end{DoxyParamCaption})}



Computes the symbol time for F\+SK modulation. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & phy\+Dr Physical datarate to use.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & bandwidth Bandwidth to use.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the symbol time. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 299 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
300 \{
301     \textcolor{keywordflow}{return} ( 8.0 / ( \textcolor{keywordtype}{double} )phyDr ); \textcolor{comment}{// 1 symbol equals 1 byte}
302 \}
\end{DoxyCode}
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga79ed8b6555b68276d3c9ff2626b20fc8}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga79ed8b6555b68276d3c9ff2626b20fc8}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra@{Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra}}
\index{Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra@{Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra()}{RegionCommonComputeSymbolTimeLoRa()}}
{\footnotesize\ttfamily double Region\+Common\+Compute\+Symbol\+Time\+Lo\+Ra (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{phy\+Dr,  }\item[{uint32\+\_\+t}]{bandwidth }\end{DoxyParamCaption})}



Computes the symbol time for Lo\+Ra modulation. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & phy\+Dr Physical datarate to use.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & bandwidth Bandwidth to use.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the symbol time. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 294 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
295 \{
296     \textcolor{keywordflow}{return} ( ( \textcolor{keywordtype}{double} )( 1 << phyDr ) / ( \textcolor{keywordtype}{double} )bandwidth ) * 1000;
297 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 7
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gaa92800c8e9ce21366d383d14878cc391}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gaa92800c8e9ce21366d383d14878cc391}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Compute\+Tx\+Power@{Region\+Common\+Compute\+Tx\+Power}}
\index{Region\+Common\+Compute\+Tx\+Power@{Region\+Common\+Compute\+Tx\+Power}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Compute\+Tx\+Power()}{RegionCommonComputeTxPower()}}
{\footnotesize\ttfamily int8\+\_\+t Region\+Common\+Compute\+Tx\+Power (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{tx\+Power\+Index,  }\item[{float}]{max\+Eirp,  }\item[{float}]{antenna\+Gain }\end{DoxyParamCaption})}



Computes the tx\+Power, based on the max E\+I\+RP and the antenna gain. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & tx\+Power TX power index.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & max\+Eirp Maximum E\+I\+RP.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & antenna\+Gain Antenna gain.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the physical TX power. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 310 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
311 \{
312     int8\_t phyTxPower = 0;
313 
314     phyTxPower = ( int8\_t )floor( ( maxEirp - ( txPowerIndex * 2U ) ) - antennaGain );
315 
316     \textcolor{keywordflow}{return} phyTxPower;
317 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 8
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gac23f0831812f610f57f42f6cf87368c9}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gac23f0831812f610f57f42f6cf87368c9}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Count\+Channels@{Region\+Common\+Count\+Channels}}
\index{Region\+Common\+Count\+Channels@{Region\+Common\+Count\+Channels}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Count\+Channels()}{RegionCommonCountChannels()}}
{\footnotesize\ttfamily uint8\+\_\+t Region\+Common\+Count\+Channels (\begin{DoxyParamCaption}\item[{uint16\+\_\+t $\ast$}]{channels\+Mask,  }\item[{uint8\+\_\+t}]{start\+Idx,  }\item[{uint8\+\_\+t}]{stop\+Idx }\end{DoxyParamCaption})}



Counts the number of active channels in a given channels mask. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & channels\+Mask The channels mask of the region.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & start\+Idx Start index.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & stop\+Idx Stop index ( the channels of this index will not be counted ).\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the number of active channels. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 121 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
122 \{
123     uint8\_t nbChannels = 0;
124 
125     \textcolor{keywordflow}{if}( channelsMask == NULL )
126     \{
127         \textcolor{keywordflow}{return} 0;
128     \}
129 
130     \textcolor{keywordflow}{for}( uint8\_t i = startIdx; i < stopIdx; i++ )
131     \{
132         nbChannels += \mbox{\hyperlink{_region_common_8c_aef7feee8e47f43eb01f62249bfcc2a06}{CountChannels}}( channelsMask[i], 16 );
133     \}
134 
135     \textcolor{keywordflow}{return} nbChannels;
136 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 9
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 10
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga672466fcf1aedaaf075cdabf49bc0c28}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga672466fcf1aedaaf075cdabf49bc0c28}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Get\+Join\+Dc@{Region\+Common\+Get\+Join\+Dc}}
\index{Region\+Common\+Get\+Join\+Dc@{Region\+Common\+Get\+Join\+Dc}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Get\+Join\+Dc()}{RegionCommonGetJoinDc()}}
{\footnotesize\ttfamily uint16\+\_\+t Region\+Common\+Get\+Join\+Dc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{Timer\+Time\+\_\+t}}}]{elapsed\+Time }\end{DoxyParamCaption})}



Calculates the join duty cycle. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & elapsed\+Time Elapsed time since the start of the device.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Duty} & cycle restriction. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 53 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
54 \{
55     uint16\_t dutyCycle = 0;
56 
57     \textcolor{keywordflow}{if}( elapsedTime < 3600000 )
58     \{
59         dutyCycle = \mbox{\hyperlink{_region_common_8c_a1d58cbd560840cdab3e4427797e88c3a}{BACKOFF\_DC\_1\_HOUR}};
60     \}
61     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( elapsedTime < ( 3600000 + 36000000 ) )
62     \{
63         dutyCycle = \mbox{\hyperlink{_region_common_8c_a70461da0dc970b3de51718ab397a81db}{BACKOFF\_DC\_10\_HOURS}};
64     \}
65     \textcolor{keywordflow}{else}
66     \{
67         dutyCycle = \mbox{\hyperlink{_region_common_8c_ada6c3c87744e22f1c053caba7c40d26c}{BACKOFF\_DC\_24\_HOURS}};
68     \}
69     \textcolor{keywordflow}{return} dutyCycle;
70 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 11
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga2c87f98f09793dc7fa63a9801feeed73}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga2c87f98f09793dc7fa63a9801feeed73}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Link\+Adr\+Req\+Verify\+Params@{Region\+Common\+Link\+Adr\+Req\+Verify\+Params}}
\index{Region\+Common\+Link\+Adr\+Req\+Verify\+Params@{Region\+Common\+Link\+Adr\+Req\+Verify\+Params}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Link\+Adr\+Req\+Verify\+Params()}{RegionCommonLinkAdrReqVerifyParams()}}
{\footnotesize\ttfamily uint8\+\_\+t Region\+Common\+Link\+Adr\+Req\+Verify\+Params (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gad186afbaf1b52893ddc3fa5eba88de0a}{Region\+Common\+Link\+Adr\+Req\+Verify\+Params\+\_\+t}} $\ast$}]{verify\+Params,  }\item[{int8\+\_\+t $\ast$}]{dr,  }\item[{int8\+\_\+t $\ast$}]{tx\+Pow,  }\item[{uint8\+\_\+t $\ast$}]{nb\+Rep }\end{DoxyParamCaption})}



Verifies and updates the datarate, the TX power and the number of repetitions of a Link\+Adr\+Request. This depends on the configuration of A\+DR also. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & verify\+Params Pointer to a structure containing input parameters.\\
\hline
{\em \mbox{[}\+O\+U\+T\mbox{]}} & dr The updated datarate.\\
\hline
{\em \mbox{[}\+O\+U\+T\mbox{]}} & tx\+Pow The updated TX power.\\
\hline
{\em \mbox{[}\+O\+U\+T\mbox{]}} & nb\+Rep The updated number of repetitions.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the status according to the Link\+Adr\+Request definition. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 231 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
232 \{
233     uint8\_t status = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a7ca418fa247ab5f1df4e8b5852d8b738}{Status}};
234     int8\_t datarate = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_ae2f6080f3aa0e9485c55513ca56bb24d}{Datarate}};
235     int8\_t txPower = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a037b4f849fa8ed4aa1d3c58aef2b28ec}{TxPower}};
236     int8\_t nbRepetitions = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a3b99538671d86dbfe2f6754ce6f9577a}{NbRep}};
237 
238     \textcolor{comment}{// Handle the case when ADR is off.}
239     \textcolor{keywordflow}{if}( verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_ab3e2fb44577c95786e11aacd56769703}{AdrEnabled}} == \textcolor{keyword}{false} )
240     \{
241         \textcolor{comment}{// When ADR is off, we are allowed to change the channels mask and the NbRep,}
242         \textcolor{comment}{// if the datarate and the TX power of the LinkAdrReq are set to 0x0F.}
243         \textcolor{keywordflow}{if}( ( verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_ae2f6080f3aa0e9485c55513ca56bb24d}{Datarate}} != 0x0F ) || ( verifyParams->
      \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a037b4f849fa8ed4aa1d3c58aef2b28ec}{TxPower}} != 0x0F ) )
244         \{
245             status = 0;
246             nbRepetitions = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a92fb5546eea8bf128e56b1ad22b088f3}{CurrentNbRep}};
247         \}
248         \textcolor{comment}{// Get the current datarate and tx power}
249         datarate = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a928ed703cdac38d74d55ef5e8a45c558}{CurrentDatarate}};
250         txPower = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_ac68ea6f7b6f8708b7a5a7fbf13ee3f97}{CurrentTxPower}};
251     \}
252 
253     \textcolor{keywordflow}{if}( status != 0 )
254     \{
255         \textcolor{comment}{// Verify datarate. The variable phyParam. Value contains the minimum allowed datarate.}
256         \textcolor{keywordflow}{if}( \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga94ce5c6e759081853eb06d1dcffdab25}{RegionCommonChanVerifyDr}}( verifyParams->
      \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a3c6d7fa8dd5ecfd55568426ded700142}{NbChannels}}, verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_aed7477cfc6166e3ee0499b898443426a}{ChannelsMask}}, datarate,
257                                       verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a990b009904bde32da9c6f4cd39a27e4c}{MinDatarate}}, verifyParams->
      \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_af426381985228a55dc22b90441f49c4c}{MaxDatarate}}, verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_afecbd1e457cbd79eb7072bd140ff33d4}{Channels}}  ) == \textcolor{keyword}{false} )
258         \{
259             status &= 0xFD; \textcolor{comment}{// Datarate KO}
260         \}
261 
262         \textcolor{comment}{// Verify tx power}
263         \textcolor{keywordflow}{if}( \mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_gafdd1c80d953e18d755a631b72a9c3bd3}{RegionCommonValueInRange}}( txPower, verifyParams->
      \mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a118829b26fb7d913d4202d5d06356a95}{MaxTxPower}}, verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_afe7bf10e9fadd8be6beb31e8b91a1ba2}{MinTxPower}} ) == 0 )
264         \{
265             \textcolor{comment}{// Verify if the maximum TX power is exceeded}
266             \textcolor{keywordflow}{if}( verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a118829b26fb7d913d4202d5d06356a95}{MaxTxPower}} > txPower )
267             \{ \textcolor{comment}{// Apply maximum TX power. Accept TX power.}
268                 txPower = verifyParams->\mbox{\hyperlink{structs_region_common_link_adr_req_verify_params_a118829b26fb7d913d4202d5d06356a95}{MaxTxPower}};
269             \}
270             \textcolor{keywordflow}{else}
271             \{
272                 status &= 0xFB; \textcolor{comment}{// TxPower KO}
273             \}
274         \}
275     \}
276 
277     \textcolor{comment}{// If the status is ok, verify the NbRep}
278     \textcolor{keywordflow}{if}( status == 0x07 )
279     \{
280         \textcolor{keywordflow}{if}( nbRepetitions == 0 )
281         \{ \textcolor{comment}{// Restore the default value according to the LoRaWAN specification}
282             nbRepetitions = 1;
283         \}
284     \}
285 
286     \textcolor{comment}{// Apply changes}
287     *dr = datarate;
288     *txPow = txPower;
289     *nbRep = nbRepetitions;
290 
291     \textcolor{keywordflow}{return} status;
292 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 12
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 13
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga8403c78482dbb901014dba48b75d78e8}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga8403c78482dbb901014dba48b75d78e8}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Parse\+Link\+Adr\+Req@{Region\+Common\+Parse\+Link\+Adr\+Req}}
\index{Region\+Common\+Parse\+Link\+Adr\+Req@{Region\+Common\+Parse\+Link\+Adr\+Req}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Parse\+Link\+Adr\+Req()}{RegionCommonParseLinkAdrReq()}}
{\footnotesize\ttfamily uint8\+\_\+t Region\+Common\+Parse\+Link\+Adr\+Req (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{payload,  }\item[{\mbox{\hyperlink{group___r_e_g_i_o_n_c_o_m_m_o_n_ga6e1aaa6b8d179e2daffac8d1e23d7f24}{Region\+Common\+Link\+Adr\+Params\+\_\+t}} $\ast$}]{parse\+Link\+Adr }\end{DoxyParamCaption})}



Parses the parameter of an Link\+Adr\+Request. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & payload Pointer to the payload containing the M\+AC commands. The payload must contain the C\+MD identifier, following by the parameters.\\
\hline
{\em \mbox{[}\+O\+U\+T\mbox{]}} & parse\+Link\+Adr The function fills the structure with the A\+DR parameters.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the length of the A\+DR request, if a request was found. Otherwise, the function returns 0. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 207 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
208 \{
209     uint8\_t retIndex = 0;
210 
211     \textcolor{keywordflow}{if}( payload[0] == \mbox{\hyperlink{group___l_o_r_a_m_a_c_ggac91cc4dc69ad7de2426360f9f1f2d079af7fc388963e2bb713062bd51960ed4cc}{SRV\_MAC\_LINK\_ADR\_REQ}} )
212     \{
213         \textcolor{comment}{// Parse datarate and tx power}
214         linkAdrParams->Datarate = payload[1];
215         linkAdrParams->TxPower = linkAdrParams->Datarate & 0x0F;
216         linkAdrParams->Datarate = ( linkAdrParams->Datarate >> 4 ) & 0x0F;
217         \textcolor{comment}{// Parse ChMask}
218         linkAdrParams->ChMask = ( uint16\_t )payload[2];
219         linkAdrParams->ChMask |= ( uint16\_t )payload[3] << 8;
220         \textcolor{comment}{// Parse ChMaskCtrl and nbRep}
221         linkAdrParams->NbRep = payload[4];
222         linkAdrParams->ChMaskCtrl = ( linkAdrParams->NbRep >> 4 ) & 0x07;
223         linkAdrParams->NbRep &= 0x0F;
224 
225         \textcolor{comment}{// LinkAdrReq has 4 bytes length + 1 byte CMD}
226         retIndex = 5;
227     \}
228     \textcolor{keywordflow}{return} retIndex;
229 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 14
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga491dea5590228a0cd33affd71743779c}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga491dea5590228a0cd33affd71743779c}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Set\+Band\+Tx\+Done@{Region\+Common\+Set\+Band\+Tx\+Done}}
\index{Region\+Common\+Set\+Band\+Tx\+Done@{Region\+Common\+Set\+Band\+Tx\+Done}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Set\+Band\+Tx\+Done()}{RegionCommonSetBandTxDone()}}
{\footnotesize\ttfamily void Region\+Common\+Set\+Band\+Tx\+Done (\begin{DoxyParamCaption}\item[{bool}]{joined,  }\item[{\mbox{\hyperlink{group___l_o_r_a_m_a_c_ga8f49721ee96ceb52c80a896ab11a2ed8}{Band\+\_\+t}} $\ast$}]{band,  }\item[{\mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{Timer\+Time\+\_\+t}}}]{last\+Tx\+Done }\end{DoxyParamCaption})}



Sets the last tx done property. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & joined Set to true, if the node has joined the network\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & band The band to be updated.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & last\+Tx\+Done The time of the last TX done. \\
\hline
\end{DoxyParams}


Region\+Common.\+c 파일의 149 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
150 \{
151     \textcolor{keywordflow}{if}( joined == \textcolor{keyword}{true} )
152     \{
153         band->\mbox{\hyperlink{structs_band_a7316dfb002c4e0015fceeb727020fe5c}{LastTxDoneTime}} = lastTxDone;
154     \}
155     \textcolor{keywordflow}{else}
156     \{
157         band->\mbox{\hyperlink{structs_band_a7316dfb002c4e0015fceeb727020fe5c}{LastTxDoneTime}} = lastTxDone;
158         band->\mbox{\hyperlink{structs_band_a0e59dea87537a3d472a44694fc2be894}{LastJoinTxDoneTime}} = lastTxDone;
159     \}
160 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 15
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_ga2e26fe6b49ca26edf7052eadd7f18b3a}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_ga2e26fe6b49ca26edf7052eadd7f18b3a}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Update\+Band\+Time\+Off@{Region\+Common\+Update\+Band\+Time\+Off}}
\index{Region\+Common\+Update\+Band\+Time\+Off@{Region\+Common\+Update\+Band\+Time\+Off}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Update\+Band\+Time\+Off()}{RegionCommonUpdateBandTimeOff()}}
{\footnotesize\ttfamily \mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{Timer\+Time\+\_\+t}} Region\+Common\+Update\+Band\+Time\+Off (\begin{DoxyParamCaption}\item[{bool}]{joined,  }\item[{bool}]{duty\+Cycle,  }\item[{\mbox{\hyperlink{group___l_o_r_a_m_a_c_ga8f49721ee96ceb52c80a896ab11a2ed8}{Band\+\_\+t}} $\ast$}]{bands,  }\item[{uint8\+\_\+t}]{nb\+Bands }\end{DoxyParamCaption})}



Updates the time-\/offs of the bands. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & joined Set to true, if the node has joined the network\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & duty\+Cycle Set to true, if the duty cycle is enabled.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & bands A pointer to the bands.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & nb\+Bands The number of bands available.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & the time which must be waited to perform the next uplink. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 162 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
163 \{
164     \mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{TimerTime\_t}} nextTxDelay = ( \mbox{\hyperlink{utilities_8h_a4215ca43d3e953099ea758ce428599d0}{TimerTime\_t}} )( -1 );
165 
166     \textcolor{comment}{// Update bands Time OFF}
167     \textcolor{keywordflow}{for}( uint8\_t i = 0; i < nbBands; i++ )
168     \{
169         \textcolor{keywordflow}{if}( joined == \textcolor{keyword}{false} )
170         \{
171             uint32\_t txDoneTime =  \mbox{\hyperlink{utilities_8h_afa99ec4acc4ecb2dc3c2d05da15d0e3f}{MAX}}( \mbox{\hyperlink{time_server_8c_a9ca7e27f3d6474daff63f2e093a2e91e}{TimerGetElapsedTime}}( bands[i].
      LastJoinTxDoneTime ),
172                                         ( dutyCycle == \textcolor{keyword}{true} ) ? 
      \mbox{\hyperlink{time_server_8c_a9ca7e27f3d6474daff63f2e093a2e91e}{TimerGetElapsedTime}}( bands[i].LastTxDoneTime ) : 0 );
173 
174             \textcolor{keywordflow}{if}( bands[i].TimeOff <= txDoneTime )
175             \{
176                 bands[i].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = 0;
177             \}
178             \textcolor{keywordflow}{if}( bands[i].TimeOff != 0 )
179             \{
180                 nextTxDelay = \mbox{\hyperlink{utilities_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}( bands[i].TimeOff - txDoneTime, nextTxDelay );
181             \}
182         \}
183         \textcolor{keywordflow}{else}
184         \{
185             \textcolor{keywordflow}{if}( dutyCycle == \textcolor{keyword}{true} )
186             \{
187                 \textcolor{keywordflow}{if}( bands[i].TimeOff <= \mbox{\hyperlink{time_server_8c_a9ca7e27f3d6474daff63f2e093a2e91e}{TimerGetElapsedTime}}( bands[i].LastTxDoneTime ) )
188                 \{
189                     bands[i].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = 0;
190                 \}
191                 \textcolor{keywordflow}{if}( bands[i].TimeOff != 0 )
192                 \{
193                     nextTxDelay = \mbox{\hyperlink{utilities_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}( bands[i].TimeOff - \mbox{\hyperlink{time_server_8c_a9ca7e27f3d6474daff63f2e093a2e91e}{TimerGetElapsedTime}}( bands[
      i].LastTxDoneTime ),
194                                        nextTxDelay );
195                 \}
196             \}
197             \textcolor{keywordflow}{else}
198             \{
199                 nextTxDelay = 0;
200                 bands[i].\mbox{\hyperlink{structs_band_a4de67f0652eb4259907c41ea8056c318}{TimeOff}} = 0;
201             \}
202         \}
203     \}
204     \textcolor{keywordflow}{return} nextTxDelay;
205 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 16
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 17
\mbox{\Hypertarget{group___r_e_g_i_o_n_c_o_m_m_o_n_gafdd1c80d953e18d755a631b72a9c3bd3}\label{group___r_e_g_i_o_n_c_o_m_m_o_n_gafdd1c80d953e18d755a631b72a9c3bd3}} 
\index{Common region implementation@{Common region implementation}!Region\+Common\+Value\+In\+Range@{Region\+Common\+Value\+In\+Range}}
\index{Region\+Common\+Value\+In\+Range@{Region\+Common\+Value\+In\+Range}!Common region implementation@{Common region implementation}}
\subsubsection{\texorpdfstring{Region\+Common\+Value\+In\+Range()}{RegionCommonValueInRange()}}
{\footnotesize\ttfamily uint8\+\_\+t Region\+Common\+Value\+In\+Range (\begin{DoxyParamCaption}\item[{int8\+\_\+t}]{value,  }\item[{int8\+\_\+t}]{min,  }\item[{int8\+\_\+t}]{max }\end{DoxyParamCaption})}



Verifies, if a value is in a given range. This is a generic function and valid for all regions. 


\begin{DoxyParams}{매개변수}
{\em \mbox{[}\+I\+N\mbox{]}} & value Value to verify, if it is in range.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & min Minimum possible value.\\
\hline
{\em \mbox{[}\+I\+N\mbox{]}} & max Maximum possible value.\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{반환값}
{\em Returns} & 1 if the value is in range, otherwise 0. \\
\hline
\end{DoxyRetVals}


Region\+Common.\+c 파일의 97 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
98 \{
99     \textcolor{keywordflow}{if}( ( value >= min ) && ( value <= max ) )
100     \{
101         \textcolor{keywordflow}{return} 1;
102     \}
103     \textcolor{keywordflow}{return} 0;
104 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
% FIG 18
